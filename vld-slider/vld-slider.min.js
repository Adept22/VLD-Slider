/* Â© Developed by Vladislav Terenchuk. Moscow. 2018. */

var window_focused=true;document.addEventListener("DOMContentLoaded",function(){window.onfocus=function(){window_focused=true};window.onblur=function(){window_focused=false};var c=[];if((e=document.querySelector(".slider"))!==null){var b=document.getElementsByClassName("slider");for(var a=0;a<b.length;a++){var d=0;while(b[a].id==""){if(document.getElementById(("#slider_"+d))==null){b[a].id="#slider_"+d}d++}c[b[a].id]=new Slider(b[a].id)}}});function Slider(b){if(typeof b==="function"){addEventListener("DOMContentLoaded",b);return}if(!(this instanceof Slider)){return new Slider(b)}try{var c=document.getElementById(b)}catch(h){}this.autorotate=function(){var j=this;this.autoplay.timer=setInterval(function(){if(window_focused){j.change(1)}},this.autoplay.autoplay_delay)};this.pause=function(){var j=this;if(j.autoplay.state){clearInterval(j.autoplay.timer);clearTimeout(j.autoplay.onchange_timeout_timer);j.autoplay.onchange_timeout_timer=setTimeout(function(){j.autorotate()},10000)}};this.change=function(k){this.slides.current=this.slides[0];this.slides.current_index=0;for(var j=0;j<this.slides.length;j++){if(this.slides[j].classList.contains("current")){this.slides.current=this.slides[j];this.slides.current_index=j}}this.slides.next_index=((this.slides.current_index+k)<0?this.length-1:((this.slides.current_index+k)>this.length-1?0:this.slides.current_index+k));this.slides.next=this.slides[this.slides.next_index];if(this.animation=="card"){this.slides.current.style.top=this.slides.next.style.top;this.slides.next.style.top="0";if(this.direction=="lr"){this.slides.current.style.left=this.slides.next.style.left;this.slides.next.style.left="0"}else{if(this.direction=="rl"){this.slides.current.style.right=this.slides.next.style.right;this.slides.next.style.right="0"}}}else{if(this.animation=="gallery"){if(this.slides.next_index>=(this.length-this.display+1)){this.slides.next_index=0;this.slides.next=this.slides[this.slides.next_index]}this.slides_wrapper[0].style.left="-"+(this.slides.current.offsetWidth*this.slides.next_index)+"px"}else{if(this.animation=="slider"){this.slides_wrapper[0].style.left="-"+(this.slides.next_index*100)+"%"}}}this.slides.current.classList.remove("current");this.slides.next.classList.add("current");if(this.previews.length>1){for(var l=0;l<this.previews.length;l++){if(this.previews[l].classList.contains("current")){this.previews.current=this.previews[l];this.previews.current_index=l}}this.previews.next_index=((this.previews.current_index+k)<0?this.previews.length-1:((this.previews.current_index+k)>this.length-1?0:this.previews.current_index+k));this.previews.next=this.previews[this.previews.next_index];for(var l=0;l<this.previews.length;l++){if(this.previews[l].classList.contains("current")){this.previews.current=this.previews[l];this.previews.current_index=l}}this.previews.current.classList.remove("current");this.previews.next.classList.add("current")}};this.animation=c.getAttribute("data-animation")?c.getAttribute("data-animation"):"slideshow";this.direction=c.getAttribute("data-direction")?c.getAttribute("data-direction"):"lr";this.display=c.getAttribute("data-display")?parseInt(c.getAttribute("data-display")):5;this.pair=c.getAttribute("data-pair")?(c.getAttribute("data-pair")):false;this.slides_wrapper=c.getElementsByClassName("slider__wrapper");this.slides=c.getElementsByClassName("slider__slide");this.controls=c.getElementsByClassName("slider__arrow");this.previews=c.getElementsByClassName("slider-item__preview");this.length=this.slides.length;this.display_count=100/this.display;for(var g=0;g<this.controls.length;g++){var d=this;this.controls[g].onclick=function(k){for(var j=0;j<d.controls.length;j++){if(d.controls[j]==this){d.change(j===0?-1:1)}}d.pause();return false}}for(var f=0;f<this.previews.length;f++){var d=this;this.previews[f].onclick=function(k){d.previews.current=d.previews[0];d.previews.current_index=0;for(var j=0;j<d.previews.length;j++){if(d.previews[j].classList.contains("current")){d.previews.current=d.previews[j];d.previews.current_index=j}}for(var j=0;j<d.previews.length;j++){if(d.previews[j]==this){d.change(j-d.previews.current_index)}}d.pause();return false}}if(this.animation=="card"){for(var a=0;a<this.slides.length;a++){if(!this.slides[a].classList.contains("current")){var i=((100-(20*a))*a)+"%";if(this.direction=="lr"){this.slides[a].style.left=i}else{if(this.direction=="rl"){this.slides[a].style.right=i}}this.slides[a].style.top=(a%2*5)+"%"}var d=this;this.slides[a].onclick=function(k){d.slides.current=d.slides[0];d.slides.current_index=0;for(var j=0;j<d.slides.length;j++){if(d.slides[j].classList.contains("current")){d.slides.current=d.slides[j];d.slides.current_index=j}}for(var j=0;j<d.slides.length;j++){if(d.slides[j]==this){d.change(j-d.slides.current_index)}}d.pause();return false}}for(var g=0;g<this.controls.length;g++){this.controls[g].style.display="none"}}this.autoplay={};this.autoplay.state=typeof c.getAttribute("data-autoplay")!==typeof null&&c.getAttribute("data-autoplay")!==false;this.autoplay.timer=null;this.autoplay.autoplay_delay=c.getAttribute("data-autoplay")!=""?c.getAttribute("data-autoplay"):5000;this.autoplay.onchange_timeout_timer=null;if(this.autoplay.state){this.autorotate()}};
